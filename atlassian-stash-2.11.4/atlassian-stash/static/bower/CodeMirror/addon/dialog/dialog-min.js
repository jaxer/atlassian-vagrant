(function(){function B(C,G,D){var F=C.getWrapperElement();var E;E=F.appendChild(document.createElement("div"));if(D){E.className="CodeMirror-dialog CodeMirror-dialog-bottom"}else{E.className="CodeMirror-dialog CodeMirror-dialog-top"}if(typeof G=="string"){E.innerHTML=G}else{E.appendChild(G)}return E}function A(C,D){if(C.state.currentNotificationClose){C.state.currentNotificationClose()}C.state.currentNotificationClose=D}CodeMirror.defineExtension("openDialog",function(H,I,K){A(this,null);var E=B(this,H,K&&K.bottom);var D=false,F=this;function J(){if(D){return }D=true;E.parentNode.removeChild(E)}var G=E.getElementsByTagName("input")[0],C;if(G){if(K&&K.value){G.value=K.value}CodeMirror.on(G,"keydown",function(L){if(K&&K.onKeyDown&&K.onKeyDown(L,G.value,J)){return }if(L.keyCode==13||L.keyCode==27){G.blur();CodeMirror.e_stop(L);J();F.focus();if(L.keyCode==13){I(G.value)}}});if(K&&K.onKeyUp){CodeMirror.on(G,"keyup",function(L){K.onKeyUp(L,G.value,J)})}if(K&&K.value){G.value=K.value}G.focus();CodeMirror.on(G,"blur",J)}else{if(C=E.getElementsByTagName("button")[0]){CodeMirror.on(C,"click",function(){J();F.focus()});C.focus();CodeMirror.on(C,"blur",J)}}return J});CodeMirror.defineExtension("openConfirm",function(K,F,M){A(this,null);var G=B(this,K,M&&M.bottom);var H=G.getElementsByTagName("button");var E=false,I=this,C=1;function L(){if(E){return }E=true;G.parentNode.removeChild(G);I.focus()}H[0].focus();for(var D=0;D<H.length;++D){var J=H[D];(function(N){CodeMirror.on(J,"click",function(O){CodeMirror.e_preventDefault(O);L();if(N){N(I)}})})(F[D]);CodeMirror.on(J,"blur",function(){--C;setTimeout(function(){if(C<=0){L()}},200)});CodeMirror.on(J,"focus",function(){++C})}});CodeMirror.defineExtension("openNotification",function(F,D){A(this,I);var E=B(this,F,D&&D.bottom);var H=D&&(D.duration===undefined?5000:D.duration);var C=false,G;function I(){if(C){return }C=true;clearTimeout(G);E.parentNode.removeChild(E)}CodeMirror.on(E,"click",function(J){CodeMirror.e_preventDefault(J);I()});if(H){G=setTimeout(I,D.duration)}})})();