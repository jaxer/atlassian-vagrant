CodeMirror.defineMode("tiddlywiki",function(){var T={};var I=function(){function a(b){return{type:b,style:"macro"}}return{allTags:a("allTags"),closeAll:a("closeAll"),list:a("list"),newJournal:a("newJournal"),newTiddler:a("newTiddler"),permaview:a("permaview"),saveChanges:a("saveChanges"),search:a("search"),slider:a("slider"),tabs:a("tabs"),tag:a("tag"),tagging:a("tagging"),tags:a("tags"),tiddler:a("tiddler"),timeline:a("timeline"),today:a("today"),version:a("version"),option:a("option"),"with":a("with"),filter:a("filter")}}();var V=/[\w_\-]/i,N=/^\-\-\-\-+$/,G=/^\/\*\*\*$/,A=/^\*\*\*\/$/,Q=/^<<<$/,F=/^\/\/\{\{\{$/,S=/^\/\/\}\}\}$/,L=/^<!--\{\{\{-->$/,Z=/^<!--\}\}\}-->$/,U=/^\{\{\{$/,J=/^\}\}\}$/,D=/.*?\}\}\}/;function O(c,b,a){b.tokenize=a;return a(c,b)}var E,P;function X(c,b,a){E=c;P=a;return b}function M(f,d){var b=f.sol(),a;d.block=false;a=f.peek();if(b&&/[<\/\*{}\-]/.test(a)){if(f.match(U)){d.block=true;return O(f,d,R)}if(f.match(Q)){return X("quote","quote")}if(f.match(G)||f.match(A)){return X("code","comment")}if(f.match(F)||f.match(S)||f.match(L)||f.match(Z)){return X("code","comment")}if(f.match(N)){return X("hr","hr")}}a=f.next();if(b&&/[\/\*!#;:>|]/.test(a)){if(a=="!"){f.skipToEnd();return X("header","header")}if(a=="*"){f.eatWhile("*");return X("list","comment")}if(a=="#"){f.eatWhile("#");return X("list","comment")}if(a==";"){f.eatWhile(";");return X("list","comment")}if(a==":"){f.eatWhile(":");return X("list","comment")}if(a==">"){f.eatWhile(">");return X("quote","quote")}if(a=="|"){return X("table","header")}}if(a=="{"&&f.match(/\{\{/)){return O(f,d,R)}if(/[hf]/i.test(a)){if(/[ti]/i.test(f.peek())&&f.match(/\b(ttps?|tp|ile):\/\/[\-A-Z0-9+&@#\/%?=~_|$!:,.;]*[A-Z0-9+&@#\/%=~_|$]/i)){return X("link","link")}}if(a=='"'){return X("string","string")}if(a=="~"){return X("text","brace")}if(/[\[\]]/.test(a)){if(f.peek()==a){f.next();return X("brace","brace")}}if(a=="@"){f.eatWhile(V);return X("link","link")}if(/\d/.test(a)){f.eatWhile(/\d/);return X("number","number")}if(a=="/"){if(f.eat("%")){return O(f,d,B)}else{if(f.eat("/")){return O(f,d,W)}}}if(a=="_"){if(f.eat("_")){return O(f,d,C)}}if(a=="-"){if(f.eat("-")){if(f.peek()!=" "){return O(f,d,Y)}if(f.peek()==" "){return X("text","brace")}}}if(a=="'"){if(f.eat("'")){return O(f,d,H)}}if(a=="<"){if(f.eat("<")){return O(f,d,K)}}else{return X(a)}f.eatWhile(/[\w\$_]/);var e=f.current(),c=T.propertyIsEnumerable(e)&&T[e];return c?X(c.type,c.style,e):X("text",null,e)}function B(d,c){var a=false,b;while(b=d.next()){if(b=="/"&&a){c.tokenize=M;break}a=(b=="%")}return X("comment","comment")}function H(d,c){var a=false,b;while(b=d.next()){if(b=="'"&&a){c.tokenize=M;break}a=(b=="'")}return X("text","strong")}function R(c,b){var a,d=b.block;if(d&&c.current()){return X("code","comment")}if(!d&&c.match(D)){b.tokenize=M;return X("code","comment")}if(d&&c.sol()&&c.match(J)){b.tokenize=M;return X("code","comment")}a=c.next();return(d)?X("code","comment"):X("code","comment")}function W(d,c){var a=false,b;while(b=d.next()){if(b=="/"&&a){c.tokenize=M;break}a=(b=="/")}return X("text","em")}function C(d,c){var a=false,b;while(b=d.next()){if(b=="_"&&a){c.tokenize=M;break}a=(b=="_")}return X("text","underlined")}function Y(d,c){var a=false,b;while(b=d.next()){if(b=="-"&&a){c.tokenize=M;break}a=(b=="-")}return X("text","strikethrough")}function K(e,c){var a,d,b;if(e.current()=="<<"){return X("brace","macro")}a=e.next();if(!a){c.tokenize=M;return X(a)}if(a==">"){if(e.peek()==">"){e.next();c.tokenize=M;return X("brace","macro")}}e.eatWhile(/[\w\$_]/);d=e.current();b=I.propertyIsEnumerable(d)&&I[d];if(b){return X(b.type,b.style,d)}else{return X("macro",null,d)}}return{startState:function(){return{tokenize:M,indented:0,level:0}},token:function(c,b){if(c.eatSpace()){return null}var a=b.tokenize(c,b);return a},electricChars:""}});CodeMirror.defineMIME("text/x-tiddlywiki","tiddlywiki");