CodeMirror.defineMode("lua",function(E,G){var I=E.indentUnit;function B(P){return new RegExp("^(?:"+P.join("|")+")","i")}function F(P){return new RegExp("^(?:"+P.join("|")+")$","i")}var L=F(G.specials||[]);var A=F(["_G","_VERSION","assert","collectgarbage","dofile","error","getfenv","getmetatable","ipairs","load","loadfile","loadstring","module","next","pairs","pcall","print","rawequal","rawget","rawset","require","select","setfenv","setmetatable","tonumber","tostring","type","unpack","xpcall","coroutine.create","coroutine.resume","coroutine.running","coroutine.status","coroutine.wrap","coroutine.yield","debug.debug","debug.getfenv","debug.gethook","debug.getinfo","debug.getlocal","debug.getmetatable","debug.getregistry","debug.getupvalue","debug.setfenv","debug.sethook","debug.setlocal","debug.setmetatable","debug.setupvalue","debug.traceback","close","flush","lines","read","seek","setvbuf","write","io.close","io.flush","io.input","io.lines","io.open","io.output","io.popen","io.read","io.stderr","io.stdin","io.stdout","io.tmpfile","io.type","io.write","math.abs","math.acos","math.asin","math.atan","math.atan2","math.ceil","math.cos","math.cosh","math.deg","math.exp","math.floor","math.fmod","math.frexp","math.huge","math.ldexp","math.log","math.log10","math.max","math.min","math.modf","math.pi","math.pow","math.rad","math.random","math.randomseed","math.sin","math.sinh","math.sqrt","math.tan","math.tanh","os.clock","os.date","os.difftime","os.execute","os.exit","os.getenv","os.remove","os.rename","os.setlocale","os.time","os.tmpname","package.cpath","package.loaded","package.loaders","package.loadlib","package.path","package.preload","package.seeall","string.byte","string.char","string.dump","string.find","string.format","string.gmatch","string.gsub","string.len","string.lower","string.match","string.rep","string.reverse","string.sub","string.upper","table.concat","table.insert","table.maxn","table.remove","table.sort"]);var H=F(["and","break","elseif","false","nil","not","or","return","true","function","end","if","then","else","do","while","repeat","until","for","in","local"]);var O=F(["function","if","repeat","do","\\(","{"]);var M=F(["end","until","\\)","}"]);var C=B(["end","until","\\)","}","else","elseif"]);function D(P){var Q=0;while(P.eat("=")){++Q}P.eat("[");return Q}function K(R,Q){var P=R.next();if(P=="-"&&R.eat("-")){if(R.eat("[")&&R.eat("[")){return(Q.cur=N(D(R),"comment"))(R,Q)}R.skipToEnd();return"comment"}if(P=='"'||P=="'"){return(Q.cur=J(P))(R,Q)}if(P=="["&&/[\[=]/.test(R.peek())){return(Q.cur=N(D(R),"string"))(R,Q)}if(/\d/.test(P)){R.eatWhile(/[\w.%]/);return"number"}if(/[\w_]/.test(P)){R.eatWhile(/[\w\\\-_.]/);return"variable"}return null}function N(Q,P){return function(U,T){var R=null,S;while((S=U.next())!=null){if(R==null){if(S=="]"){R=0}}else{if(S=="="){++R}else{if(S=="]"&&R==Q){T.cur=K;break}else{R=null}}}}return P}}function J(P){return function(T,R){var S=false,Q;while((Q=T.next())!=null){if(Q==P&&!S){break}S=!S&&Q=="\\"}if(!S){R.cur=K}return"string"}}return{startState:function(P){return{basecol:P||0,indentDepth:0,cur:K}},token:function(S,Q){if(S.eatSpace()){return null}var P=Q.cur(S,Q);var R=S.current();if(P=="variable"){if(H.test(R)){P="keyword"}else{if(A.test(R)){P="builtin"}else{if(L.test(R)){P="variable-2"}}}}if((P!="comment")&&(P!="string")){if(O.test(R)){++Q.indentDepth}else{if(M.test(R)){--Q.indentDepth}}}return P},indent:function(R,P){var Q=C.test(P);return R.basecol+I*(R.indentDepth-(Q?1:0))},lineComment:"--",blockCommentStart:"--[[",blockCommentEnd:"]]"}});CodeMirror.defineMIME("text/x-lua","lua");