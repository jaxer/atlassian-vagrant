CodeMirror.defineMode("smarty",function(A){var E={rightDelimiter:"}",leftDelimiter:"{",smartyVersion:2};if(A.hasOwnProperty("leftDelimiter")){E.leftDelimiter=A.leftDelimiter}if(A.hasOwnProperty("rightDelimiter")){E.rightDelimiter=A.rightDelimiter}if(A.hasOwnProperty("smartyVersion")&&A.smartyVersion===3){E.smartyVersion=3}var D=["debug","extends","function","include","literal"];var G;var C={operatorChars:/[+\-*&%=<>!?]/,validIdentifier:/[a-zA-Z0-9_]/,stringChar:/['"]/};var F={cont:function(I,H){G=H;return I},chain:function(I,H,J){H.tokenize=J;return J(I,H)}};var B={tokenizer:function(K,I){if(K.match(E.leftDelimiter,true)){if(K.eat("*")){return F.chain(K,I,B.inBlock("comment","*"+E.rightDelimiter))}else{I.depth++;var H=K.eol();var J=/\s/.test(K.peek());if(E.smartyVersion===3&&E.leftDelimiter==="{"&&(H||J)){I.depth--;return null}else{I.tokenize=B.smarty;G="startTag";return"tag"}}}else{K.next();return null}},smarty:function(M,K){if(M.match(E.rightDelimiter,true)){if(E.smartyVersion===3){K.depth--;if(K.depth<=0){K.tokenize=B.tokenizer}}else{K.tokenize=B.tokenizer}return F.cont("tag",null)}if(M.match(E.leftDelimiter,true)){K.depth++;return F.cont("tag","startTag")}var J=M.next();if(J=="$"){M.eatWhile(C.validIdentifier);return F.cont("variable-2","variable")}else{if(J=="|"){return F.cont("operator","pipe")}else{if(J=="."){return F.cont("operator","property")}else{if(C.stringChar.test(J)){K.tokenize=B.inAttribute(J);return F.cont("string","string")}else{if(C.operatorChars.test(J)){M.eatWhile(C.operatorChars);return F.cont("operator","operator")}else{if(J=="["||J=="]"){return F.cont("bracket","bracket")}else{if(J=="("||J==")"){return F.cont("bracket","operator")}else{if(/\d/.test(J)){M.eatWhile(/\d/);return F.cont("number","number")}else{if(K.last=="variable"){if(J=="@"){M.eatWhile(C.validIdentifier);return F.cont("property","property")}else{if(J=="|"){M.eatWhile(C.validIdentifier);return F.cont("qualifier","modifier")}}}else{if(K.last=="pipe"){M.eatWhile(C.validIdentifier);return F.cont("qualifier","modifier")}else{if(K.last=="whitespace"){M.eatWhile(C.validIdentifier);return F.cont("attribute","modifier")}}}if(K.last=="property"){M.eatWhile(C.validIdentifier);return F.cont("property",null)}else{if(/\s/.test(J)){G="whitespace";return null}}var L="";if(J!="/"){L+=J}var N=null;while(N=M.eat(C.validIdentifier)){L+=N}for(var I=0,H=D.length;I<H;I++){if(D[I]==L){return F.cont("keyword","keyword")}}if(/\s/.test(J)){return null}return F.cont("tag","tag")}}}}}}}}},inAttribute:function(H){return function(K,I){var L=null;var J=null;while(!K.eol()){J=K.peek();if(K.next()==H&&L!=="\\"){I.tokenize=B.smarty;break}L=J}return"string"}},inBlock:function(I,H){return function(K,J){while(!K.eol()){if(K.match(H)){J.tokenize=B.tokenizer;break}K.next()}return I}}};return{startState:function(){return{tokenize:B.tokenizer,mode:"smarty",last:null,depth:0}},token:function(J,I){var H=I.tokenize(J,I);I.last=G;return H},electricChars:""}});CodeMirror.defineMIME("text/x-smarty","smarty");