define("page/branches",["jquery","memoir","util/ajax","util/events","util/navbuilder","model/revision-reference","feature/repository/branch-table","exports"],function(G,I,H,L,J,A,D,E){function B(M){return J.currentRepo().branches(M).build()}function K(){window.location.reload();return G.Deferred()}function F(M){L.on("stash.page.branches.revisionRefRemoved",function(N){if(!M.isCurrentBase(N)){M.remove(N)}else{window.location=B()}});L.on("stash.layout.branch.revisionRefChanged",function(N){N=N.toJSON();I.pushState(N,null,B(N))});L.on("memoir.changestate",function(O){var N=O.state;if(N){M.update(N);L.trigger("stash.page.branches.revisionRefChanged",null,new A(N))}})}function C(M){M.initShortcuts();L.on("stash.widget.keyboard-shortcuts.register-contexts",function(N){N.enableContext("branch-list")})}E.onReady=function(M,P,N,R){var Q=G(M);Q.append(stash.feature.repository.branchTable({repository:N,baseRef:R,id:P,filterable:false}));var O=new D({target:"#branch-list",filter:'input[data-for="branch-list"]',statusCode:H.ignore404WithinRepository(K)},R);O.init();F(O);C(O)}});