define("widget/breadcrumbs",["jquery","memoir","util/dom-event","util/events","util/navbuilder","model/page-state"],function(D,G,B,J,H,F){function E(K){this.$container=D(K);if(G.nativeSupport()){var L=this;this.$container.on("click","a",function(M){if(B.openInSameTab(M)){J.trigger("stash.widget.breadcrumbs.urlChanged",L,D(this).attr("href"));M.preventDefault()}})}}var C=H.currentRepo().browse(),I=function(K,L){if(!L.isDefault()){return C.path(K).at(L.getId()).build()}else{return C.path(K).build()}};function A(N,M){var L=[],K=_.map(M,function(O){L=L.slice(0);L.push(O);return{text:O,url:I(L,N)}});K.unshift({text:F.getRepository().getName(),url:I([],N)});return K}E.prototype.update=function(M,L,K){this.$container.empty().append(stash.widget.breadcrumbs.crumbs({pathComponents:A(M,L.getComponents()),trailingSlash:K}))};return E});