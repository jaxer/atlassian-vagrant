define("widget/image-tools/upload-interceptor",["jquery","underscore"],function(C,A){function B(D,E){return this.init.apply(this,arguments)}B.prototype.defaults={replacementEl:undefined,clientFileHandler:null};B.prototype.init=function(D,E){A.bindAll(this,"onSelectFile","onReplacementClick");this.$el=C(D);this.options=C.extend({},this.defaults,E);this.$el.on("change",this.onSelectFile);if(this.options.replacementEl){this.$replacement=C(this.options.replacementEl);this.$el.hide();if(C.browser.msie){if(!this.$replacement.is("label")){this.$replacement.hide();this.$el.show()}}else{this.$replacement.on("click",this.onReplacementClick)}}};B.prototype.onSelectFile=function(D){if(C(D.target).val()&&this.options.clientFileHandler){this.options.clientFileHandler.handleFiles(D.target.files,this.$el)}};B.prototype.onReplacementClick=function(D){D.preventDefault();this.$el.click()};B.prototype.destroy=function(){this.$el.off("change",this.onSelectFile);this.$replacement.off("click",this.onReplacementClick)};return B});