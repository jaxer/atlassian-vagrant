define("widget/image-tools/drag-drop-file-target",["jquery","underscore"],function(C,A){function B(D,E){return this.init.apply(this,arguments)}B.prototype.getDefaults=function(){return{activeDropTargetClass:"active-drop-target",uploadPrompt:"Drag a file here to upload",clientFileHandler:null}};B.prototype.init=function(D,E){A.bindAll(this,"onDragOver","onDragEnd","onDrop");this.$target=C(D);this.options=C.extend({},this.getDefaults(),E);this.$target.attr("data-upload-prompt",this.options.uploadPrompt);this.$target.on("dragover",this.onDragOver);this.$target.on("dragleave",this.onDragEnd);this.$target.on("dragend",this.onDragEnd);this.$target.on("drop",this.onDrop)};B.prototype.onDragOver=function(D){D.preventDefault();this.$target.addClass(this.options.activeDropTargetClass)};B.prototype.onDragEnd=function(D){D.preventDefault();this.$target.removeClass(this.options.activeDropTargetClass)};B.prototype.onDrop=function(D){D.preventDefault();D.originalEvent.preventDefault();this.$target.removeClass(this.options.activeDropTargetClass);if(this.options.clientFileHandler){this.options.clientFileHandler.handleFiles(D.originalEvent.dataTransfer.files,D.originalEvent.target)}};return B});