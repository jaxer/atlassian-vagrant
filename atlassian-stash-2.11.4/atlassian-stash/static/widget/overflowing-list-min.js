define("widget/overflowing-list",["jquery"],function(E){function C(H,F,G){this._$container=E(H);this._opts=E.extend({overflowMenuId:this._$container.attr("data-overflow-menu-id")},C.defaults,G);this._items=Array.prototype.slice.call(F)}C.defaults={maxOpen:5,itemSelector:undefined,overflowMenuClass:"aui-style-default aui-dropdown2-tailed",getItemHtml:function(G,F){return"<span>"+(typeof G==="string"?G:JSON.stringify(G))+"</span>"},compareFn:function(G,F){return -1}};function A(G,F){G.find("> .aui-dropdown2-trigger .aui-badge").text(F)}function D(G,F){return F?E("#"+F+" > ul"):G.children(".aui-dropdown2:last > ul")}function B(I,H,F){var G=E(widget.aui.dropdown2({menuId:F,menuClass:H,triggerContent:'<div class="extras-dropdown-trigger">'+aui.badges.badge({text:"?"})+"</div>",menuContent:'<ul class="aui-list-truncate"></ul>',hasCustomStyle:true})).appendTo(I);return G.children("ul")}C.prototype.addItem=function(R){var H=this._opts.maxOpen;var F=this._opts.compareFn;var O=this._opts.getItemHtml;var G=this._opts.overflowMenuClass;var P=this._opts.overflowMenuId;var N;var Q=this._$container;var S=D(Q,P);var M=S.find("li").children(this._opts.itemSelector);var L=Q.children(this._opts.itemSelector).not(".aui-dropdown2-trigger, .aui-dropdown2").add(M);var I=false;for(var J=0,K=this._items.length;J<K;J++){if(F(R,this._items[J])<0){if(J>=H){N=E(O(R,true));N.wrap("<li/>").parent().insertBefore(L.eq(J).parent());A(Q,this._items.length+1-H)}else{N=E(O(R,false));N.insertBefore(L.eq(J)).hide().fadeIn("fast");if(this._items.length>=H){L.eq(H-1).remove();(S.length?S:B(Q,G,P)).prepend(E("<li/>").append(O(this._items[H-1],true)));A(Q,this._items.length+1-H)}}this._items.splice(J,0,R);I=true;break}}if(!I){if(this._items.length>=H){(S.length?S:B(Q,G,P)).append(E(O(R,true)).wrap("<li/>").parent());A(Q,this._items.length+1-H)}else{N=E(O(R,false));N.appendTo(Q).hide().fadeIn("fast")}this._items.push(R)}};return C});