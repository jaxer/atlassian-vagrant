define("feature/repository/base-repository-selector",["jquery","model/repository","util/events","widget/searchable-selector"],function(E,B,D,A){function C(G,F){return this.init.apply(this,arguments)}E.extend(C.prototype,A.prototype);C.constructDataPageFromPreloadArray=A.constructDataPageFromPreloadArray;C.prototype.defaults=E.extend(true,{},A.prototype.defaults,{searchable:false,extraClasses:"base-repository-selector",resultsTemplate:stash.feature.repository.baseRepositorySelectorResults,triggerContentTemplate:stash.feature.repository.baseRepositorySelectorTriggerContent,searchPlaceholder:stash_i18n("stash.web.repositorySelector.search.placeholder","Search for a repository"),namespace:"base-repository-selector",itemSelectedEvent:"stash.feature.repository.repositorySelector.repositoryChanged",itemDataKey:"repository"});C.prototype._getItemFromTrigger=function(){var F=this.$trigger.find(".repository");return new B(E.extend({},this._buildObjectFromElementDataAttributes(F),{name:F.children(".name").text()}))};C.prototype.setSelectedItem=function(F){if(F instanceof B&&!F.isEqual(this._selectedItem)){this._itemSelected(F)}};C.prototype._itemSelected=function(F){var G;if(F instanceof B){G=F;F=F.toJSON()}else{F=_.pick(F,_.keys(B.prototype.namedAttributes));G=new B(F)}this._selectedItem=G;if(this._getOptionVal("field")){E(this._getOptionVal("field")).val(F.id)}this.updateTrigger({repository:F});D.trigger(this._getOptionVal("itemSelectedEvent"),this,G,this._getOptionVal("context"))};return C});