define("feature/pull-request/pull-request-diff",["jquery","aui","model/commit-range","util/events","layout/page-scrolling-manager","feature/changeset/tree-and-diff-view","feature/pull-request/pull-request-history","exports"],function(D,I,E,J,A,F,G,C){function B(K){(this.execute?this:I.whenIType(K)).execute(function(){D(".add-file-comment-trigger:first").click()})}var H;C.init=function(M,L,K){J.on("stash.keyboard.shortcuts.pullrequest.addCommentHandler",B);H=A.acceptScrollForwardingRequests();F.init(new E({pullRequest:M}),{commentMode:F.commentMode.CREATE_NEW,maxChanges:L,relevantContextLines:K,toolbarWebFragmentLocationPrimary:"stash.pull-request.diff.toolbar.primary",toolbarWebFragmentLocationSecondary:"stash.pull-request.diff.toolbar.secondary"});G.init()};C.reset=function(){J.off("stash.keyboard.shortcuts.pullrequest.addCommentHandler",B);G.reset();var K=F.reset();H();return K}});