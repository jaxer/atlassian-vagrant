define("feature/pull-request/merge-help",["aui","util/events","util/navbuilder"],function(A,D,G){var C;function F(L,N,K){var J=new A.Dialog({width:800,height:480,id:"merge-help-dialog",closeOnOutsideClick:true}).addHeader(stash_i18n("stash.web.pull-request.merge.help.header","Issues Merging the Pull Request"));var I=L.getFromRef().getRepository();var M=L.getToRef().getRepository();var H=null;var O=null;if(!I.isEqual(M)){H=G.project(I.getProject()).repo(I).clone(I.getScmId()).buildAbsolute();O=G.project(M.getProject()).repo(M).clone(M.getScmId()).buildAbsolute()}J.addPanel("",stash.feature.pullRequest.mergeHelp({sourceBranch:L.getFromRef().getDisplayId(),targetBranch:L.getToRef().getDisplayId(),sourceRemote:H,targetRemote:O,conflicted:N,vetoes:K}));J.addCancel(stash_i18n("stash.web.button.close","Close"),_.bind(J.hide,J));return J}function E(){if(C){C.show();C.updateHeight()}}var B=function(I,J,H){if(C){C.remove()}C=F(I,J,H)};return{init:function(){D.on("stash.pull-request.cant.merge",B);D.on("stash.pull-request.show.cant.merge.help",E)},reset:function(){D.off("stash.pull-request.cant.merge",B);D.off("stash.pull-request.show.cant.merge.help",E);if(C){C.remove();C=null}}}});