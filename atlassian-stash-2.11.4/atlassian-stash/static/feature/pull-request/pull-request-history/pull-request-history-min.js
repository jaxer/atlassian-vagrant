define("feature/pull-request/pull-request-history",["jquery","util/events","util/client-storage","exports"],function(E,H,B,C){var G,I;function A(J){F(J.$tree)}function F(K){var J=K.find(".jstree-leaf");J.each(function(L,N){var M=E(N),O=M.data("path").toString,P=M.data("contentId");if(I[O]===P){M.addClass("viewed")}})}function D(J){var K=J.data("path").toString,L=J.data("contentId");if(I[K]!==L){I[K]=L;B.setItem(G,I);J.addClass("viewed")}}C.init=function(){G=B.buildKey("history","pull-request");I=B.getItem(G)||{};H.on("stash.feature.changeset.difftree.treeInitialised",A);H.on("stash.feature.changeset.difftree.nodeOpening",F);H.on("stash.feature.changeset.difftree.selectedNodeChanged",D)};C.reset=function(){G=null;I=null;H.off("stash.feature.changeset.difftree.treeInitialised",A);H.off("stash.feature.changeset.difftree.nodeOpening",F);H.off("stash.feature.changeset.difftree.selectedNodeChanged",D)}});