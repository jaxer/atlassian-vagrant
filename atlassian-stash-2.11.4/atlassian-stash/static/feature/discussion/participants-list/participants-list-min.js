define("feature/discussion/participants-list",["underscore"],function(A){function B(D,C,E){this.$list=C;this.$container=E;this.participants=D;A.bindAll(this,"addedParticipantHandler","approvalHandler");D.on("change:approved",this.approvalHandler);D.on("add",this.addedParticipantHandler)}B.prototype.addedParticipantHandler=function(D){this.$list.append("<li>"+stash.widget.avatarList.participantAvatar({participant:D.toJSON(),extraClasses:"participant-item",withName:true})+"</li>");var E=this.$container.find(".count");if(E.length){var F=parseInt(E.text(),10);if(F===1){var C=this.$container.find(".label");C.text(stash_i18n("stash.web.discussion.participants.label.plural","Participants"))}E.text(++F)}else{this.$container.find(".participants-trigger").prepend(stash.feature.discussion.participantCount({count:1}))}this.$container.removeClass("hidden")};B.prototype.approvalHandler=function(C){var D=this.$list.find(".user-avatar[data-username='"+C.getUser().getName()+"']");D.toggleClass("badge-hidden",!C.getApproved())};B.prototype.destroy=function(){this.participants.off("add",this.addedParticipantHandler);this.participants.off("change:approved",this.approvalHandler)};return B});