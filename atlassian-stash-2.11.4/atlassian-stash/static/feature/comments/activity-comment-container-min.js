define("feature/comments/activity-comment-container",["jquery","underscore","util/events","widget/markup-preview","feature/comments/comment-container"],function(D,A,B,E,C){return C.extend({initialize:function(){C.prototype.initialize.apply(this,arguments)},rootCommentListSelector:".pull-request-activity",events:A.extend({},C.prototype.events,{"focus .general-comment-form textarea":"onGeneralFormTextareaFocused"}),initDeleteButtons:function(){this.createDeleteDialog().attachTo(".general-comment-activity .delete",null,this.el)},insertCommentIntoList:function(H,F,I){if(F.is(this.rootCommentListSelector)){var G=F.children(":first");H.insertAfter(G)}else{C.prototype.insertCommentIntoList.apply(this,arguments)}},closeCommentForm:function(F){F.find(".error").remove();if(F.is(".general-comment-form")){F.addClass("collapsed");F.find("textarea").val("").trigger("input").removeClass("restored").removeAttr("title").blur();this.deleteDraftComment(this.getDraftCommentFromForm(F));E.unbind(F)}else{C.prototype.closeCommentForm.apply(this,arguments)}},getExtraCommentClasses:function(){return"general-comment-activity"},onGeneralFormTextareaFocused:function(G){var F=D(G.target).closest(".general-comment-form");E.bindTo(F);F.removeClass("collapsed")},destroy:D.noop})});