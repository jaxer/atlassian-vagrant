define("feature/comments/anchors",["jquery","model/page-state","util/navbuilder"],function(F,E,B){function A(G){G=G||{};this._projectKey=G.projectKey||E.getProject().getKey();this._repoSlug=G.repoSlug||E.getRepository().getSlug();this._pullRequestId=G.pullRequestId||E.getPullRequest().getId()}A.prototype.getId=function(){return"pullrequest-"+this._projectKey+"-"+this._repoSlug+"-"+this._pullRequestId};A.prototype.toJSON=function(){return undefined};A.prototype.urlBuilder=function(){return B.rest().project(this._projectKey).repo(this._repoSlug).pullRequest(this._pullRequestId).comments()};function D(G){this._path=G.getPath();this._srcPath=G.getSrcPath();this._commitRange=G.getCommitRange();this._projectKey=(G.getRepository()||E).getProject().getKey();this._repoSlug=(G||E).getRepository().getSlug()}D.prototype.getId=function(){return"diff-"+this._projectKey+"-"+this._repoSlug+"-"+this._commitRange.getId()+"-"+this._path};D.prototype.toJSON=function(){var G={path:this._path.toString(),commitRange:this._commitRange.toJSON()};var H=this._srcPath&&this._srcPath.toString();if(H){G.srcPath=H}return G};D.prototype.urlBuilder=function(){var G=B.rest().project(this._projectKey).repo(this._repoSlug);var H=this._commitRange.getPullRequest();if(H){return G.pullRequest(H.getId()).comments()}return G.changeset(this._commitRange.getUntilRevision().getId()).comments()};function C(J,I,G,H){this._diffAnchor=J;this._lineType=I;this._line=G;this._fileType=H}C.prototype.getId=function(){var G=this._fileType?this._fileType+"-":"";return"line-"+this._diffAnchor.getId()+"-"+G+this._lineType+"-"+this._line};C.prototype.toJSON=function(){var G=F.extend(this._diffAnchor.toJSON(),{line:this._line,lineType:this._lineType});if(this._fileType){G.fileType=this._fileType}return G};C.prototype.urlBuilder=function(){return this._diffAnchor.urlBuilder()};return{PullRequestAnchor:A,DiffAnchor:D,LineAnchor:C}});