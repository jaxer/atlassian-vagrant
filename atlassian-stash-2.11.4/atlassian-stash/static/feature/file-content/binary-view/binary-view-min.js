define("feature/file-content/binary-view",["jquery","underscore","util/deprecation","util/events","util/navbuilder","exports"],function(G,M,J,O,H,F){function D(Q,P){return H.currentRepo().browse().path(Q.components).at(P).raw().build()}function C(P){return{$elem:G(stash.feature.fileContent.binaryView.unrenderable({rawUrl:P})),type:"link"}}function L(Q){var P=G("<img />");P.attr("src",Q);return{$elem:P,type:"image"}}var K={png:L,jpg:L,jpeg:L,bmp:L,ico:L,gif:L,svg:L};function E(S,Q){var T=S.extension&&S.extension.toLowerCase();var P=D(S,Q),R=K[T]||C;return R(P)}function I(T,S,Q){var R=Q.getUntilRevision();var P=E(S,R&&R.getId());T.empty().addClass("binary").append(P.$elem);O.trigger("stash.feature.sourceview.onBinary",null,{path:S,type:P.type,revision:R});return T}function B(W,Q,V,R){var X,U,T,S=R.getUntilRevision(),P=R.getSinceRevision();G(aui.toolbar2.toolbar2({content:"",extraClasses:"image-diff-toolbar"})).prependTo(W);if(Q&&P){X=E(Q,P.getId());U=X.type;G("<div class='since-revision'>").addClass("binary").append(G("<h5>").text(stash_i18n("stash.web.diff.since.revision","Old"))).append(X.$elem).appendTo(W)}if(V&&S){X=E(V,S.getId());T=X.type;G("<div class='until-revision'>").addClass("binary").append(G("<h5>").text(stash_i18n("stash.web.diff.until.revision","New"))).append(X.$elem).appendTo(W)}O.trigger("stash.feature.diffview.onBinary",this,{$container:W,sourcePath:Q,sourceType:U,sinceRevision:P,destinationPath:V,destinationType:T,untilRevision:S})}var A=["svg"];function N(P){var Q=P.destination&&P.destination.extension;return !!(P&&(P.binary||Q&&(M.indexOf(A,Q)>=0)))}F.renderBinaryFile=J.fn(I,"feature/file-content/binary-view::renderBinaryFile","feature/file-content/binary-source-view","2.10","3.0");F.renderBinaryDiff=J.fn(B,"feature/file-content/binary-view::renderBinaryDiff","feature/file-content/binary-diff-view","2.10","3.0");F.shouldRenderBinary=N;F.getRenderedBinary=E});