define("feature/file-content/diff-view/options-panel",["util/deprecation","feature/file-content/diff-view-options-panel"],function(A,B){A.getMessageLogger("feature/file-content/diff-view/options-panel","feature/file-content/diff-view-options-panel","2.11","3.0")();return B});define("feature/file-content/diff-view-options-panel",["chaperone","jquery","util/events","feature/file-content/diff-view-options","exports"],function(C,L,P,H,K){var I=L(document);var Q="#diff-options-dropdown";var F="#diff-options-core a";var B="#diff-options-dropdown-trigger";function M(U){A();var S=L(this);var R=S.attr("data-key");var V=S.attr("data-value");var T=(U.type==="aui-dropdown2-item-check");if(S.is("[role=radio]")&&!T){return }H.set(R,V||T)}function G(R){L(this).find("#diff-options-core a").each(function(){var T=L(this);var S=T.attr("data-key");var V=T.attr("data-value");var U=H.get(S);var W=(U&&(U===V||U===true));T.toggleClass("checked",W)});P.on("window.scroll.throttled",A)}function J(R){P.off("window.scroll.throttled",A)}function A(R){if(I.find(Q).attr("aria-hidden")==="false"){I.find(B).trigger("aui-button-invoke")}}function E(){A();H.set("ignoreWhitespace",!H.get("ignoreWhitespace"))}function O(){A();H.set("diffType",H.get("diffType")==="unified"?"side-by-side":"unified")}function D(R){(this.execute?this:AJS.whenIType(R)).execute(E)}function N(R){(this.execute?this:AJS.whenIType(R)).execute(O)}P.on("stash.keyboard.shortcuts.requestIgnoreWhitespace",D);P.on("stash.keyboard.shortcuts.changeDiffTypeRequested",N);K.init=function(){I.on("aui-dropdown2-item-check aui-dropdown2-item-uncheck",F,M);I.on("aui-dropdown2-show",Q,G);I.on("aui-dropdown2-hide",Q,J);C.registerFeature("side-by-side-diff-discovery",[{id:"side-by-side-diff-discovery",selector:B,title:stash_i18n("stash.web.diff.side-by-side.feature.discovery.title","Side-by-side diff"),content:stash_i18n("stash.web.diff.side-by-side.feature.discovery.content","Stash has a new way to view diffs. Use this menu to try it."),once:true}])};K.destroy=function(){I.off("aui-dropdown2-item-check aui-dropdown2-item-uncheck",F,M);I.off("aui-dropdown2-show",Q,G);I.off("aui-dropdown2-hide",Q,J)}});